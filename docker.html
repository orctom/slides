<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Dockers</title>

	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/night.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/monokai.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>

	<!-- ruleJS -->
	<script async defer src="https://buttons.github.io/buttons.js"></script>
	<script src="plugin/spreadsheet/ruleJS.all.full.min.js"></script>
	<link rel="stylesheet" href="plugin/spreadsheet/spreadsheet.css">
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section data-markdown>
				<script type="text/template">
					# Introduction to Docker
				</script>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
						## Dockeræ˜¯ä»€ä¹ˆ

						> An open platform for developing, shipping, and running applications
						>
						> -- <cite>docker.com</cite>
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## Dockeræ˜¯ä»€ä¹ˆ

						* ä¸€ç§"è™šæ‹ŸåŒ–æŠ€æœ¯"
						 - VM Ware / Virtual Box...
						* "ä¸€ç§"è™šæ‹ŸåŒ–æŠ€æœ¯
						 - Vagrant / KVM / LXC / rkt / OpenVZ / Jails...
						* ä¸€ç§æ ‡å‡†åŒ–è½¯ä»¶åˆ†å‘å’Œéƒ¨ç½²æ–¹å¼
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## ä¸ºä»€ä¹ˆç”¨Docker

						* ç”Ÿäº§ç¯å¢ƒå’Œæœ¬åœ°å¼€å‘ç¯å¢ƒä¸€è‡´ï¼ˆè¿™ä¸ªç¨‹åºåœ¨æˆ‘æœ¬åœ°æ˜¯å¥½å¥½åœ°å•Š...ï¼‰
						 - GCC / JDK / Python ç‰ˆæœ¬
						 - Linux / Windows / OSX
						* éš”ç¦» (æˆ‘çš„ç¨‹åºè·‘ä¸èµ·æ¥äº†ï¼Œéƒ½æ˜¯xxçš„æœåŠ¡æŠŠèµ„æºéƒ½å å®Œäº†)
						* è½»é‡ (Dockeræ‰€å çš„å¯åŠ¨æ—¶é—´å¯ä»¥å¿½ç•¥ä¸è®¡)
						* Dictation: ç”±æ–‡ä»¶å®šä¹‰ï¼ˆDockerfileï¼‰
						* é…å¥—è®¾æ–½å®Œæ•´ -- CI / CD, Mesos / Swarm / k8s...
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## ä¸ºä»€ä¹ˆç”¨Docker

						* ç”Ÿäº§ç¯å¢ƒå’Œæœ¬åœ°å¼€å‘ç¯å¢ƒä¸€è‡´ï¼ˆè¿™ä¸ªç¨‹åºåœ¨æˆ‘æœ¬åœ°æ˜¯å¥½å¥½åœ°å•Š...ï¼‰
						 - GCC / JDK / Python ç‰ˆæœ¬
						 - Linux / Windows / OSX
						* éš”ç¦» (æˆ‘çš„ç¨‹åºè·‘ä¸èµ·æ¥äº†ï¼Œéƒ½æ˜¯xxçš„æœåŠ¡æŠŠèµ„æºéƒ½å å®Œäº†)
						* è½»é‡ (Dockeræ‰€å çš„å¯åŠ¨æ—¶é—´å¯ä»¥å¿½ç•¥ä¸è®¡)
						* Dictation: ç”±æ–‡ä»¶å®šä¹‰ï¼ˆDockerfileï¼‰
						* é…å¥—è®¾æ–½å®Œæ•´ -- CI / CD, Mesos / Swarm / k8s...
					</script>
				</section>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
						## Dockerçš„åŸºæœ¬ä½¿ç”¨
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## å®‰è£…

						```shell
						# linux
						$ curl -fsSL https://get.docker.com | sh

						# linux ç”¨é˜¿é‡Œäº‘çš„é•œåƒ
						$ curl -fsSL https://get.docker.com | sh -s docker --mirror Aliyun

						# mac
						https://hub.docker.com/editions/community/docker-ce-desktop-mac

						# æŠŠç”¨æˆ·åŠ åˆ°dockerç»„ï¼Œè¿™æ ·å°±ä¸éœ€è¦sudoäº†
						$ sudo usermod -aG docker $USER
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker version

						```shell
						$ docker version
						Client: Docker Engine - Community
						 Version:           19.03.4
						 API version:       1.40
						 Go version:        go1.12.10
						 Git commit:        9013bf5
						 Built:             Thu Oct 17 23:44:48 2019
						 OS/Arch:           darwin/amd64
						 Experimental:      false
						
						Server: Docker Engine - Community
						 Engine:
						  Version:          19.03.4
						  API version:      1.40 (minimum version 1.12)
						  Go version:       go1.12.10
						  Git commit:       9013bf5
						  Built:            Thu Oct 17 23:50:38 2019
						  OS/Arch:          linux/amd64
						  Experimental:     false
						 containerd:
						  Version:          v1.2.10
						  GitCommit:        b34a5c8af56e510852c35414db4c1f4fa6172339
						 runc:
						  Version:          1.0.0-rc8+dev
						  GitCommit:        3e425f80a8c931f88e6d94a8c831b9d5aa481657
						 docker-init:
						  Version:          0.18.0
						  GitCommit:        fec3683
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker -v

						```shell
						$ docker -v
						Docker version 19.03.4, build 9013bf5
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						![](https://docs.docker.com/engine/images/architecture.svg)
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker images

						```shell
						$ docker images
						REPOSITORY           TAG         IMAGE ID      CREATED        SIZE
						lczlcz1995/obksem    1.0.0       c108fc462925  6 months ago   1.74GB
						orctom/familia       latest      ebabcd2c5441  7 months ago   1.58GB
						python               3.6-alpine  54c461256011  8 months ago   79MB
						dockercloud/haproxy  latest      4d6ae6c16c4d  22 months ago  42.6MB
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker ps

						```shell
						$ docker ps -a
						CONTAINER ID  IMAGE                         COMMAND                 CREATED      STATUS                    PORTS                                                                                       NAMES
						bffd3798e240  rabbitmq:3-management         "docker-entrypoint.sâ€¦"  4 days ago   Exited (255) 3 days ago   4369/tcp, 5671/tcp, 0.0.0.0:5672->5672/tcp, 15671/tcp, 25672/tcp, 0.0.0.0:15672->15672/tcp  rabbit
						90c8c3c50c9e  26d1616ce21b                  "run-worker.sh"         4 days ago   Created                                                                                                               wizardly_gauss
						b1a85656c039  elkozmon/zoonavigator:latest  "./run.sh"              2 weeks ago  Up 39 hours (healthy)     0.0.0.0:9000->9000/tcp                                                                      zoonavigator
						2e2a60acd513  traefik:2.0                   "/entrypoint.sh --apâ€¦"  3 weeks ago  Exited (255) 3 weeks ago  0.0.0.0:5001->80/tcp, 0.0.0.0:50010->8080/tcp                                               qianlima_reverse-proxy_1
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker search

						```shell
						$ docker search nginx
						NAME                     DESCRIPTION                                     STARS  OFFICIAL AUTOMATED
						nginx                    Official build of Nginx.                        12169  [OK]
						jwilder/nginx-proxy      Automated Nginx reverse proxy for docker conâ€¦   1685            [OK]
						richarvey/nginx-php-fpm  Container running Nginx + PHP-FPM capable ofâ€¦   745             [OK]
						linuxserver/nginx        An Nginx container, brought to you by LinuxSâ€¦   81
						bitnami/nginx            Bitnami nginx Docker Image                      72              [OK]
						...
						```

						https://hub.docker.com/
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker pull

						```shell
						$ docker pull nginx
						Using default tag: latest
						latest: Pulling from library/nginx
						8d691f585fa8: Downloading [=>                                                 ]  842.5kB/27.11MB
						5b07f4e08ad0: Downloading [=========================>                         ]  11.94MB/23.69MB
						abc291867bca: Download complete

								|
								V

						8d691f585fa8: Pull complete
						5b07f4e08ad0: Pull complete
						abc291867bca: Pull complete
						Digest: sha256:922c815aa4df050d4df476e92daed4231f466acc8ee90e0e774951b0fd7195a4
						Status: Downloaded newer image for nginx:latest
						docker.io/library/nginx:latest
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker run

						```shell
						$ docker run \
							-it \                      # interactive + tty
							--rm \                     # é€€å‡ºå®¹å™¨æ—¶è‡ªåŠ¨åˆ é™¤
							-v nginx.conf:/etc/nginx/nginx.conf:ro \  # mountä¸€ä¸ªæ–‡ä»¶(å¤¹)åˆ°å®¹å™¨ä¸­
							-p 8000:80                 # æš´éœ²ç«¯å£ï¼šå†…éƒ¨ç«¯å£
							nginx:alpine               # é•œåƒåï¼šæ ‡ç­¾åï¼Œæ ‡ç­¾åé»˜è®¤ä¸ºlatest
						```

						```shell
						$ docker run \
							-d \                       # detachedï¼ˆåå°è¿è¡Œï¼‰
							--name rabbit \            # å®¹å™¨çš„åç§°
							--restart on-failure:10    # æ„å¤–é€€å‡ºï¼Œæœ€å¤šå°è¯•æ‹‰èµ·10æ¬¡
							-e RABBITMQ_DEFAULT_USER=user \ # å‚æ•°ï¼ˆç¯å¢ƒå˜é‡ï¼‰
							-e RABBITMQ_DEFAULT_PASS=password \
							-p 5672:5672 \             # æš´éœ²ç«¯å£ï¼šå†…éƒ¨ç«¯å£
							-p 15672:15672 \
							rabbitmq:3-management      # é•œåƒåï¼šç‰ˆæœ¬å·ï¼Œç‰ˆæœ¬å·é»˜è®¤ä¸ºlatest
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker exec

						```shell
						$ docker exec -it <container_id> sh
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker logs

						```shell
						# ä»æœ€è¿‘10åˆ†é’Ÿå¼€å§‹
						$ docker logs -f --since 10m <container_id>

						# ä»æœ€è¿‘200è¡Œå¼€å§‹
						$ docker logs -f --tail 200 <container_id>
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker rm

						```shell
						$ docker rm <container_id>

						$ docker rm -v <container_id>
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker rmi

						```shell
						$ docker rmi <image_id>

						$ docker rmi <image_name>:<tag_name>
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## docker save & docker load

						```shell
						# save
						$ docker save qianlima:110811 | gzip > qianlima_110811.tar.gz

						# load
						$ gunzip -c qianlima_110811.tar.tz | docker load
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## bailian ç§æœ‰ä»“åº“

						http://confluence.bailian-ai.com/display/ERAKA/docker
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						![](https://docs.docker.com/engine/images/architecture.svg)
					</script>
				</section>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
						## æ„å»ºDockeré•œåƒ
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## åªéœ€è¦ä¸‰æ­¥

						* å‡†å¤‡å¥½å¾€é•œåƒé‡Œè£…çš„ç¨‹åº
						* Dockerfile: ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶
						* è¿è¡Œ `docker build -t xxx .`
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## ä¸¾ä¸ªğŸŒ°

						note:
						ç°åœºæ„å»ºä¸€ä¸ªæœ€ç®€å•çš„python app
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## Dockerfile
						
						```shell
						FROM registry-vpc.cn-beijing.aliyuncs.com/bailian/python:3.6
						ADD . /app
						WORKDIR /app
						
						RUN apt-get update \
						  && apt-get install opencc libmariadb-dev -y --no-install-recommends \
						  && pip install -r requirements.txt --no-cache-dir \
						  && apt-get clean \
						  && apt-get autoremove -y \
						  && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
						
						ENV nlp_endpoint_pos=http://pos.api.bailian-ai.com:50001/pos
						
						EXPOSE 8081
						CMD ["python", "app.py"]
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## Dockerfile éƒ¨åˆ†æŒ‡ä»¤

						https://docs.docker.com/engine/reference/builder/
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## .dockerignore

						```text
						# comment
						*/temp*
						*/*/temp*
						temp?
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## ä¸€äº›å»ºè®®

						* ä¸€ä¸ªé•œåƒåªåšä¸€ä»¶äº‹æƒ…ï¼ˆä¸€ä¸ªè¿›ç¨‹ï¼‰
						* æƒ³åŠæ³•å‡å°é•œåƒçš„å¤§å°
					</script>
				</section>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
						## Docker Compose
					</script>
				</section>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
						## Docker Swarm
					</script>
				</section>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
						## Kubernetes (k8s)
					</script>
				</section>
			</section>
			<section data-markdown>
				<script type="text/template">
					## å­¦ä¹ èµ„æº
						
 					* <https://docker-curriculum.com/>
					* <https://www.katacoda.com/courses/docker>
					* <https://training.play-with-docker.com/>
					* [Docker for Beginners](https://www.udemy.com/share/101Juc/)
					* [Containers 101](https://www.udemy.com/share/101z3U/)
				</script>
			</section>
			<section data-markdown>
				<script type="text/template">
					# Thanks
				</script>
			</section>
		</div>
	</div>

	<script src="js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			math: {
				mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
				config: 'TeX-AMS_HTML-full', // See http://docs.mathjax.org/en/latest/config-files.html
			},
			menu: { // Menu works best with font-awesome installed: sudo apt-get install fonts-font-awesome
				themes: false,
				transitions: false,
				markers: false,
				hideMissingTitles: true,
				keyboard: true,
			},
			sequencediagrams: {
				theme: "simple",
				useFragments: true,
				initialize: (function (diagramContainer) {
					console.log("Diagram rendered!");
				})
			},
			chalkboard: { // font-awesome.min.css must be available
				// src: "plugin/chalkboard/chalkboard.json",
				src: null,
				toggleChalkboardButton: {
					left: "80px"
				},
				toggleNotesButton: {
					left: "130px"
				},
			},
			keyboard: {
				67: function () {
					RevealChalkboard.toggleNotesCanvas()
				}, // toggle chalkboard when 'c' is pressed
				66: function () {
					RevealChalkboard.toggleChalkboard()
				}, // toggle chalkboard when 'b' is pressed
				46: function () {
					RevealChalkboard.clear()
				}, // clear chalkboard when 'DEL' is pressed
				8: function () {
					RevealChalkboard.reset()
				}, // reset all chalkboard data when 'BACKSPACE' is pressed
			},
			dependencies: [{
					src: 'plugin/markdown/marked.js'
				},
				{
					src: 'plugin/markdown/markdown.js'
				},
				{
					src: 'plugin/notes/notes.js',
					async: true
				},
				{
					src: 'plugin/math/math.js',
					async: true
				},
				{
					src: 'plugin/highlight/highlight.js',
					async: true,
					callback: function () {
						hljs.initHighlightingOnLoad();
					}
				},
				{
					src: 'plugin/sequence-diagrams/webfont.js'
				},
				{
					src: 'plugin/sequence-diagrams/snap.svg-min.js'
				},
				{
					src: 'plugin/sequence-diagrams/underscore-min.js'
				},
				{
					src: 'plugin/sequence-diagrams/sequence-diagram-min.js'
				},
				{
					src: 'plugin/sequence-diagrams/sequence-diagrams-plugin.js'
				},
				{
					src: 'plugin/zoom-js/zoom.js',
					async: true
				},
				{
					src: 'plugin/spreadsheet/spreadsheet.js'
				},
				{
					src: 'plugin/menu/menu.js'
				},
				{
					src: 'plugin/chalkboard/chalkboard.js'
				},
			]
		});
	</script>
</body>

</html>
